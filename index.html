<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="Multiverse analyses run the same (or very similar) analyses over a
    range of arbitrary data processing decisions. We provide an interface for creating
    analysis decision grids and generating all possible combinations of those decisions. 
    Grids can contain data filtering criteria, different versions of IVs and DVs, 
    modeling strategies, pre- and post-analysis steps. You can also compute general
    descriptive statistics, correlations, and cronbach's alpha (for reliability)
    over arbitrary decisions.">
<title>Tools for Running Multiverse Style Analyses • multitool</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><link href="deps/Lato-0.4.5/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="Tools for Running Multiverse Style Analyses">
<meta property="og:description" content="Multiverse analyses run the same (or very similar) analyses over a
    range of arbitrary data processing decisions. We provide an interface for creating
    analysis decision grids and generating all possible combinations of those decisions. 
    Grids can contain data filtering criteria, different versions of IVs and DVs, 
    modeling strategies, pre- and post-analysis steps. You can also compute general
    descriptive statistics, correlations, and cronbach's alpha (for reliability)
    over arbitrary decisions.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-dark navbar-expand-lg bg-primary"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">multitool</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="articles/decision-grids.html">Decision Grids</a>
    <a class="dropdown-item" href="articles/filtering-grids.html">filtering-grids</a>
    <a class="dropdown-item" href="articles/variable-grids.html">variable-grids</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="multitool-">multitool <a href="https://ethan-young.github.io/multitool/"><img src="reference/figures/logo.jpeg" align="right" height="139"></a>
<a class="anchor" aria-label="anchor" href="#multitool-"></a>
</h1></div>
<!-- badges: start -->

<p>The goal of <code>multitool</code> is to provide a set of tools for designing and running multiverse-style analyses. My goal with this package is to create an incremental workflow for slowly building up, keeping track of, and unpacking multiverse analyses and results.</p>
<p>I designed <code>multitool</code> to help users take a single use case (e.g., a single analysis pipeline) and expand it into a workflow to include alternative versions of the same analysis.</p>
<p>For example, imagine you would like to take some data, remove outliers, transform variables, run a linear model, do a post-hoc analysis, and plot the results. <code>multitool</code> can take theses tasks and transform them into a <em>specification blueprint</em>, which provides instructions for running your analysis pipeline.</p>
<p>The functions were designed to play nice with the <a href="https://www.tidyverse.org/" class="external-link"><code>tidyverse</code></a> and require using the base R pipe <code>|&gt;</code>. This makes it easy to quickly convert a single analysis into a multiverse analysis.</p>
<div class="section level2">
<h2 id="basic-components">Basic components<a class="anchor" aria-label="anchor" href="#basic-components"></a>
</h2>
<p>My vision of a multiverse workflow contains three parts.</p>
<ol style="list-style-type: decimal">
<li>
<strong>Base data:</strong> original dataset waiting for further processing</li>
<li>
<strong>specification blueprint:</strong> aka specification grid. This a blueprint/map/recipe or whatever you want to call it. These are the instructions for what to do.</li>
<li>
<strong>Multiverse results:</strong> a table of results after feeding the base data to the blueprint.</li>
</ol>
<p>A defining feature of <code>multitool</code> is that it saves pipeline code. This allows the user to grab the <em>code that produces a result</em> and inspect it for accuracy, errors, or simply for peace of mind. By quickly grabbing code, the user can iterate between creating their blueprint and checking that the code works as intended.</p>
<p><code>multitool</code> allows the user to model data however they’d like. The user is responsible for loading the relevant modeling packages. Regardless of your model choice, <code>multitool</code> will capture your code and build a pipeline.</p>
<p>Finally, multiverse analyses were originally intended to look at how model parameters shift as a function of arbitrary analysis decisions. However, any computation might change depending on how you slice and dice the data. For this reason, I also built functions for computing descriptive, correlation, and reliability analysis alongside a particular modelling pipeline.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>You can install the development version of <code>multitool</code> from <a href="https://github.com/" class="external-link">GitHub</a> with:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu">install_github</span><span class="op">(</span><span class="st">"ethan-young/multitool"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ethan-young.github.io/multitool/">multitool</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="the-base-data">The base data<a class="anchor" aria-label="anchor" href="#the-base-data"></a>
</h2>
<p>Image we have some data with several predictor variables, moderators, covariates, and dependent measures. We want to know if our predictors (<code>ivs</code>) interact with our moderators (<code>mods</code>) to predict the outcome (<code>dvs</code>).</p>
<p>But we have three versions of our predictor that measuring the same construct in a different way.</p>
<p>In addition, because we collected messy data from the real world (not really but let’s pretend), we have some idea of exclusions we might need to make (e.g., <code>include1</code>, <code>include2</code>, <code>include3</code>).</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id  <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">500</span>,</span>
<span>    iv1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    iv2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    iv3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    mod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    dv1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    dv2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    include1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">500</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>,</span>
<span>    include2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">500</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    include3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-a-blueprint">Create a blueprint<a class="anchor" aria-label="anchor" href="#create-a-blueprint"></a>
</h2>
<p>Say we don’t know much about this new and exciting area of research.</p>
<p>We want to maximize our knowledge but we also want to be systematic. One approach would be to specify a reasonable analysis pipeline. Something that looks like the following:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter out exclusions</span></span>
<span><span class="va">filtered_data</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">the_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>,           <span class="co"># --</span></span>
<span>    <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>,           <span class="co"># Exclusion criteria</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span>   <span class="co"># --</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Model the data</span></span>
<span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv1</span> <span class="op">~</span> <span class="va">iv1</span> <span class="op">*</span> <span class="va">mod</span>, data <span class="op">=</span> <span class="va">filtered_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the results</span></span>
<span><span class="va">my_results</span> <span class="op">&lt;-</span> <span class="fu">broom</span><span class="fu">::</span><span class="fu"><a href="https://generics.r-lib.org/reference/tidy.html" class="external-link">tidy</a></span><span class="op">(</span><span class="va">my_model</span><span class="op">)</span></span></code></pre></div>
<p>But what if there are valid alternative alternatives to this pipeline?</p>
<p>For example, using <code>iv2</code> instead of <code>iv1</code> or only using two exclusion criteria instead of three? A sensible approach would be to copy the code above, paste it, and edit with different decisions.</p>
<p>This quickly become tedious. It adds many lines of code, many new objects, and is difficult to keep track of in a systematic way. Enter <code>multitool</code>.</p>
<p>With <code>multitool</code>, the above analysis pipeline can be transformed into a grid – a specification blueprint – for exploring all combinations of sensible data decisions in a pipeline. It was designed to leverage already written code (e.g., the <code>filter</code> statement above) to create a multiverse of data analysis pipelines.</p>
</div>
<div class="section level2">
<h2 id="filtering-specifications">Filtering specifications<a class="anchor" aria-label="anchor" href="#filtering-specifications"></a>
</h2>
<p>Our example above has three exclusion criteria. If we don’t know which are important, for example, because they are based on arbitrary ‘rules of thumb’ (that may or may not have inherent wisdom) or we don’t know if including/excluding these cases is valid, we can generate all combinations:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 3</span></span>
<span><span class="co">#&gt;   type    group    code                          </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;   &lt;chr&gt;    &lt;chr&gt;                         </span></span>
<span><span class="co">#&gt; 1 filters include1 include1 == 0                 </span></span>
<span><span class="co">#&gt; 2 filters include1 include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt; 3 filters include2 include2 != 3                 </span></span>
<span><span class="co">#&gt; 4 filters include2 include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt; 5 filters include3 scale(include3) &gt; -2.5        </span></span>
<span><span class="co">#&gt; 6 filters include3 include3 %in% unique(include3)</span></span></code></pre></div>
<p>The output above is a simple <code>tibble</code> (i.e., <code>data.frame</code>) containing three columns.</p>
<p>Each row is a possible filter: the <code>type</code> column refers to the type of blueprint specification (see below for types other than filters), the <code>group</code> refers to the variable in the base data frame (in our case <code>the_data</code>) for which the filter applies, and the <code>code</code> column contains the code needed to execute the filter.</p>
<p>For filtering decisions (e.g., exclusion criteria), a <em>‘do nothing’</em> alternative is always generated.</p>
<p>For example, perhaps some observations belong to a subgroup, <code>include1 == 1</code>. We may or may not have good reason to exclude these cases (this depends on the specific situation).</p>
<p>But imagine that we don’t know if we should include them or not. When <code>include1 == 1</code> is added to <code><a href="reference/add_filters.html">add_filters()</a></code>, the <em>‘do nothing’</em> alternative <code>include1 %in% unique(include1)</code> is automatically generated so you can compare including versus excluding cases based on a criterion.</p>
</div>
<div class="section level2">
<h2 id="adding-alternative-analysis-variables">Adding alternative analysis variables<a class="anchor" aria-label="anchor" href="#adding-alternative-analysis-variables"></a>
</h2>
<p>Most multiverse-style analyses explore a range of exclusion criteria and their alternatives. However, sometimes alternative versions of a variable are also included.</p>
<p>In the social sciences, it is fairly common to have many measures of roughly the same construct (i.e., measured variable). For example, a happiness researcher might measure positive mood, life satisfaction, and/or a single item measuring happiness (e.g., ‘how happy do your feel?’).</p>
<p>If you want to explore the output of your pipeline with differing versions of a variable, you can use <code><a href="reference/add_variables.html">add_variables()</a></code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 3 × 3</span></span>
<span><span class="co">#&gt;   type      group code </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 variables ivs   iv1  </span></span>
<span><span class="co">#&gt; 2 variables ivs   iv2  </span></span>
<span><span class="co">#&gt; 3 variables ivs   iv3</span></span></code></pre></div>
<p>The output above generates the same <code>tibble</code> as <code><a href="reference/add_filters.html">add_filters()</a></code>. Each row is a particular decision to use a particular variable in your pipeline.</p>
<p>In contrast to filter, however, you need to tell <code><a href="reference/add_variables.html">add_variables()</a></code> what to call each set of variables with the <code>var_group</code> argument. This is how <code>multitool</code> knows that each variable name in the <code>code</code> column is a different alternative of a larger set.</p>
<p>Here, <code>var_group = "ivs"</code> indicates that <code>iv1, iv2, iv3</code> are all different versions of <code>ivs</code>. I used “ivs” as way of indicating to myself that these are alternative versions of my main independent variable.</p>
<p>You can add as many variable sets as you want. For example, we might also want to analyze our two versions of the outcome, <code>dv1</code> and <code>dv2</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 5 × 3</span></span>
<span><span class="co">#&gt;   type      group code </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;</span></span>
<span><span class="co">#&gt; 1 variables ivs   iv1  </span></span>
<span><span class="co">#&gt; 2 variables ivs   iv2  </span></span>
<span><span class="co">#&gt; 3 variables ivs   iv3  </span></span>
<span><span class="co">#&gt; 4 variables dvs   dv1  </span></span>
<span><span class="co">#&gt; 5 variables dvs   dv2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="building-up-the-blueprint">Building up the blueprint<a class="anchor" aria-label="anchor" href="#building-up-the-blueprint"></a>
</h2>
<p>You can harness the real power of <code>multitool</code> by piping specification statements. For example, perhaps we want to explore our exclusion criteria alternatives across different versions of our predictor and outcome variables. We can simply pipe new blueprint specifications into each other like so:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 11 × 3</span></span>
<span><span class="co">#&gt;    type      group    code                          </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;    &lt;chr&gt;                         </span></span>
<span><span class="co">#&gt;  1 filters   include1 include1 == 0                 </span></span>
<span><span class="co">#&gt;  2 filters   include1 include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt;  3 filters   include2 include2 != 3                 </span></span>
<span><span class="co">#&gt;  4 filters   include2 include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt;  5 filters   include3 scale(include3) &gt; -2.5        </span></span>
<span><span class="co">#&gt;  6 filters   include3 include3 %in% unique(include3)</span></span>
<span><span class="co">#&gt;  7 variables ivs      iv1                           </span></span>
<span><span class="co">#&gt;  8 variables ivs      iv2                           </span></span>
<span><span class="co">#&gt;  9 variables ivs      iv3                           </span></span>
<span><span class="co">#&gt; 10 variables dvs      dv1                           </span></span>
<span><span class="co">#&gt; 11 variables dvs      dv2</span></span></code></pre></div>
<p>Notice that we now have a specification blueprint with both exclusion alternatives and variable alternatives.</p>
</div>
<div class="section level2">
<h2 id="adding-a-model">Adding a model<a class="anchor" aria-label="anchor" href="#adding-a-model"></a>
</h2>
<p>The whole point of building a specification blueprint is to eventually feed it to a model and examine the results.</p>
<p>You can add a model to your blueprint by using <code><a href="reference/add_model.html">add_model()</a></code>. I designed <code><a href="reference/add_model.html">add_model()</a></code> so the user can simply paste a model function. For example, our call to <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> can be simply pasted into <code><a href="reference/add_model.html">add_model()</a></code>. Make sure to give your model a label with the <code>model_desc</code> argument.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv1</span> <span class="op">~</span> <span class="va">iv1</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span><span class="co">#&gt;    type      group        code                          </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;                         </span></span>
<span><span class="co">#&gt;  1 filters   include1     include1 == 0                 </span></span>
<span><span class="co">#&gt;  2 filters   include1     include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt;  3 filters   include2     include2 != 3                 </span></span>
<span><span class="co">#&gt;  4 filters   include2     include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt;  5 filters   include3     scale(include3) &gt; -2.5        </span></span>
<span><span class="co">#&gt;  6 filters   include3     include3 %in% unique(include3)</span></span>
<span><span class="co">#&gt;  7 variables ivs          iv1                           </span></span>
<span><span class="co">#&gt;  8 variables ivs          iv2                           </span></span>
<span><span class="co">#&gt;  9 variables ivs          iv3                           </span></span>
<span><span class="co">#&gt; 10 variables dvs          dv1                           </span></span>
<span><span class="co">#&gt; 11 variables dvs          dv2                           </span></span>
<span><span class="co">#&gt; 12 models    linear model lm(dv1 ~ iv1 * mod)</span></span></code></pre></div>
<p>Above, the model is completely unquoted. It also has no <code>data</code> argument. This is intentional; <code>multitool</code> is tracking the base dataset along the way (so you don’t have to). Note that you can still quote the model formula, if that is more your style.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"lm(dv1 ~ iv1 * mod)"</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span><span class="co">#&gt;    type      group               code                            </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;               &lt;chr&gt;                           </span></span>
<span><span class="co">#&gt;  1 filters   include1            "include1 == 0"                 </span></span>
<span><span class="co">#&gt;  2 filters   include1            "include1 %in% unique(include1)"</span></span>
<span><span class="co">#&gt;  3 filters   include2            "include2 != 3"                 </span></span>
<span><span class="co">#&gt;  4 filters   include2            "include2 %in% unique(include2)"</span></span>
<span><span class="co">#&gt;  5 filters   include3            "scale(include3) &gt; -2.5"        </span></span>
<span><span class="co">#&gt;  6 filters   include3            "include3 %in% unique(include3)"</span></span>
<span><span class="co">#&gt;  7 variables ivs                 "iv1"                           </span></span>
<span><span class="co">#&gt;  8 variables ivs                 "iv2"                           </span></span>
<span><span class="co">#&gt;  9 variables ivs                 "iv3"                           </span></span>
<span><span class="co">#&gt; 10 variables dvs                 "dv1"                           </span></span>
<span><span class="co">#&gt; 11 variables dvs                 "dv2"                           </span></span>
<span><span class="co">#&gt; 12 models    lm(dv1 ~ iv1 * mod) ""</span></span></code></pre></div>
<p>To make sure your <code><a href="reference/add_variables.html">add_variables()</a></code> works properly, <code><a href="reference/add_model.html">add_model()</a></code> was designed to interpret <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code> syntax. For example:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>,<span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="op">{</span><span class="va">dvs</span><span class="op">}</span> <span class="op">~</span> <span class="op">{</span><span class="va">ivs</span><span class="op">}</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 12 × 3</span></span>
<span><span class="co">#&gt;    type      group        code                          </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;     &lt;chr&gt;        &lt;chr&gt;                         </span></span>
<span><span class="co">#&gt;  1 filters   include1     include1 == 0                 </span></span>
<span><span class="co">#&gt;  2 filters   include1     include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt;  3 filters   include2     include2 != 3                 </span></span>
<span><span class="co">#&gt;  4 filters   include2     include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt;  5 filters   include3     scale(include3) &gt; -2.5        </span></span>
<span><span class="co">#&gt;  6 filters   include3     include3 %in% unique(include3)</span></span>
<span><span class="co">#&gt;  7 variables ivs          iv1                           </span></span>
<span><span class="co">#&gt;  8 variables ivs          iv2                           </span></span>
<span><span class="co">#&gt;  9 variables ivs          iv3                           </span></span>
<span><span class="co">#&gt; 10 variables dvs          dv1                           </span></span>
<span><span class="co">#&gt; 11 variables dvs          dv2                           </span></span>
<span><span class="co">#&gt; 12 models    linear model lm({dvs} ~ {ivs} * mod)</span></span></code></pre></div>
<p>This allows <code>multitool</code> to insert the correct version of each variable specified in a <code><a href="reference/add_variables.html">add_variables()</a></code> step. Make sure to use embrace the variable with the <code>var_group</code> argument from <code><a href="reference/add_variables.html">add_variables()</a></code>, for example <code>add_model(lm({dvs} ~ {ivs} * mod))</code>. Here, <code>{dvs}</code> and <a href="https://github.com/DavisVaughan/ivs" class="external-link">ivs</a> tells <code>multitool</code> to insert the current version of the <code>ivs</code> and <code>dvs</code> into the model.</p>
</div>
<div class="section level2">
<h2 id="finalizing-the-specification-blueprint">Finalizing the specification blueprint<a class="anchor" aria-label="anchor" href="#finalizing-the-specification-blueprint"></a>
</h2>
<p>There are two steps in finalizing your bluerpint. The first is to visualize your pipeline with a graph. This is optional, but I think it is helpful.</p>
<p>You can automate making a chart with <code><a href="reference/blueprint.html">blueprint()</a></code>. Feed your pipeline to <code><a href="reference/blueprint.html">blueprint()</a></code> to see a chart of your multiverse pipeline plan:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">full_pipeline</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="va">include3</span><span class="op">)</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="op">{</span><span class="va">dvs</span><span class="op">}</span> <span class="op">~</span> <span class="op">{</span><span class="va">ivs</span><span class="op">}</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="reference/blueprint.html">blueprint</a></span><span class="op">(</span><span class="va">full_pipeline</span><span class="op">)</span></span></code></pre></div>
<p><img src="reference/figures/README-blueprint-chart-1.png" width="100%"></p>
<p>The final step in making your blueprint is expanding all your specifications into all possible combinations. You can do this by calling <code><a href="reference/expand_decisions.html">expand_decisions()</a></code> at the end of your blueprint pipeline:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/expand_decisions.html">expand_decisions</a></span><span class="op">(</span><span class="va">full_pipeline</span><span class="op">)</span></span>
<span></span>
<span><span class="va">expanded_pipeline</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 4</span></span>
<span><span class="co">#&gt;    decision variables        filters          models          </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;list&gt;           &lt;list&gt;          </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 2]&gt;</span></span>
<span><span class="co">#&gt; # … with 38 more rows</span></span></code></pre></div>
<p>The result is an expanded <code>tibble</code> with 1 row per unique decision and columns for each major blueprint category. In our example, we have alternative variables (predictors and outcomes), filters (three exclusion alternatives), and a model to run.</p>
<p>Note that we have 3 exclusions (each with two combinations), 3 versions of our predictor, and 2 versions of our outcome. This means our blueprint should have <code>2*2*2*3*2</code> rows.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">*</span><span class="fl">2</span><span class="op">*</span><span class="fl">2</span><span class="op">*</span><span class="fl">3</span><span class="op">*</span><span class="fl">2</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">full_pipeline</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] FALSE</span></span></code></pre></div>
<p>Our blueprint uses list columns to organize information. You can view each list column by using <code>tidyr::unnest(&lt;column name&gt;)</code>. For example, we can look at the filters:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">filters</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 6</span></span>
<span><span class="co">#&gt;    decision variables        include1      include2      include3       models  </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;chr&gt;         &lt;chr&gt;         &lt;chr&gt;          &lt;list&gt;  </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 scale(include… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 include3 %in%… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 include3 %in%… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 include3 %in%… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 2]&gt; include1 == 0 include2 != 3 include3 %in%… &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; # … with 38 more rows</span></span></code></pre></div>
<p>Or we could look at the models:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 5</span></span>
<span><span class="co">#&gt;    decision variables        filters          model               model_meta  </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;list&gt;           &lt;chr&gt;               &lt;chr&gt;       </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv3 * mod) linear model</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv3 * mod) linear model</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 2]&gt; &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt; # … with 38 more rows</span></span></code></pre></div>
<p>Notice that, with the <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code> syntax, different versions of our predictors and outcomes were inserted appropriately. You can check their correspondence by using <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest()</a></code> on both the models and variable list columns:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">variables</span>, <span class="va">models</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 6</span></span>
<span><span class="co">#&gt;    decision ivs   dvs   filters          model               model_meta  </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;list&gt;           &lt;chr&gt;               &lt;chr&gt;       </span></span>
<span><span class="co">#&gt;  1 1        iv1   dv1   &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  2 2        iv1   dv2   &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  3 3        iv2   dv1   &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt;  4 4        iv2   dv2   &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt;  5 5        iv3   dv1   &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv3 * mod) linear model</span></span>
<span><span class="co">#&gt;  6 6        iv3   dv2   &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv3 * mod) linear model</span></span>
<span><span class="co">#&gt;  7 7        iv1   dv1   &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  8 8        iv1   dv2   &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv1 * mod) linear model</span></span>
<span><span class="co">#&gt;  9 9        iv2   dv1   &lt;tibble [1 × 3]&gt; lm(dv1 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt; 10 10       iv2   dv2   &lt;tibble [1 × 3]&gt; lm(dv2 ~ iv2 * mod) linear model</span></span>
<span><span class="co">#&gt; # … with 38 more rows</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="validate-your-blueprint">Validate your blueprint<a class="anchor" aria-label="anchor" href="#validate-your-blueprint"></a>
</h2>
<p>A <code>multitool</code> specification blueprint has a special feature: it captures your code and generates analysis pipelines.</p>
<p>A special set of functions with the <code>show_code_*</code> prefix allow you to see the code that will be executed for a single pipeline. For example, we can look at our filtering code for the first decision of our blueprint:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/show_code_filter.html">show_code_filter</a></span><span class="op">(</span>decision_num <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; the_data |&gt; </span></span>
<span><span class="co">#&gt;   filter(include1 == 0, include2 != 3, scale(include3) &gt; -2.5)</span></span></code></pre></div>
<p>These functions allow you to generate the relevant code along the analysis pipeline. For example, we can look at our model pipeline for decision 17 using <code>show_code_model(decision_num = 17)</code>:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/show_code_filter.html">show_code_model</a></span><span class="op">(</span>decision_num <span class="op">=</span> <span class="fl">17</span><span class="op">)</span></span>
<span><span class="co">#&gt; the_data |&gt; </span></span>
<span><span class="co">#&gt;   filter(include1 == 0, include2 %in% unique(include2), scale(include3) &gt; -2.5) |&gt; </span></span>
<span><span class="co">#&gt;   lm(dv1 ~ iv3 * mod, data = _)</span></span></code></pre></div>
<p>Setting the <code>copy</code> argument to <code>TRUE</code> allows you to send the code straight to your clipboard. You can paste it into the source or console for testing/editing.</p>
<p>You can also run individual decisions to test that they work. See below for details about the results.</p>
<div class="sourceCode" id="cb20"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="reference/run_universe_model.html">run_universe_model</a></span><span class="op">(</span><span class="va">expanded_pipeline</span>, decision_num <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   decision lm_fitted       </span></span>
<span><span class="co">#&gt;   &lt;chr&gt;    &lt;list&gt;          </span></span>
<span><span class="co">#&gt; 1 1        &lt;tibble [1 × 5]&gt;</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="implement-your-blueprint">Implement your blueprint<a class="anchor" aria-label="anchor" href="#implement-your-blueprint"></a>
</h2>
<p>Once you have built your full specification blueprint and feel comfortable with how the pipeline is executed, you can implement a full multiverse-style analysis.</p>
<p>Simply use <code>run_multiverse(&lt;your pipeline object&gt;)</code>:</p>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">&lt;-</span> <span class="fu"><a href="reference/run_multiverse.html">run_multiverse</a></span><span class="op">(</span><span class="va">expanded_pipeline</span><span class="op">)</span></span>
<span><span class="co">#&gt; ■■■■■■■■■■■■ 38% | ETA: 4s■■■■■■■■■■■■■■ 44% | ETA: 3s■■■■■■■■■■■■■■■ 48% |</span></span>
<span><span class="co">#&gt; ETA: 3s■■■■■■■■■■■■■■■■ 50% | ETA: 3s■■■■■■■■■■■■■■■■■ 54% | ETA:</span></span>
<span><span class="co">#&gt; 3s■■■■■■■■■■■■■■■■■■■ 58% | ETA: 3s■■■■■■■■■■■■■■■■■■■ 60% | ETA:</span></span>
<span><span class="co">#&gt; 2s■■■■■■■■■■■■■■■■■■■■ 65% | ETA: 2s■■■■■■■■■■■■■■■■■■■■■ 67% | ETA:</span></span>
<span><span class="co">#&gt; 2s■■■■■■■■■■■■■■■■■■■■■■ 71% | ETA: 2s■■■■■■■■■■■■■■■■■■■■■■■ 75% | ETA:</span></span>
<span><span class="co">#&gt; 2s■■■■■■■■■■■■■■■■■■■■■■■■ 77% | ETA: 1s■■■■■■■■■■■■■■■■■■■■■■■■■ 81% | ETA:</span></span>
<span><span class="co">#&gt; 1s■■■■■■■■■■■■■■■■■■■■■■■■■■ 83% | ETA: 1s■■■■■■■■■■■■■■■■■■■■■■■■■■■ 88% |</span></span>
<span><span class="co">#&gt; ETA: 1s■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 90% | ETA: 1s■■■■■■■■■■■■■■■■■■■■■■■■■■■■■</span></span>
<span><span class="co">#&gt; 94% | ETA: 0s■■■■■■■■■■■■■■■■■■■■■■■■■■■■■■ 96% | ETA: 0s</span></span>
<span></span>
<span><span class="va">multiverse_results</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 3</span></span>
<span><span class="co">#&gt;    decision specifications   lm_fitted       </span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;list&gt;          </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 3]&gt; &lt;tibble [1 × 5]&gt;</span></span>
<span><span class="co">#&gt; # … with 38 more rows</span></span></code></pre></div>
<p>The result will be another <code>tibble</code> with various list columns.</p>
<p>It will always contain a list column named <code>specifications</code> containing all the information you generated in your blueprint. Next, there will be one list column per model fitted, labelled with a suffix like so <code>&lt;function name&gt;_fitted</code>.</p>
<p>Here, we ran a <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> so our results are contained in <code>lm_fitted</code>.</p>
</div>
<div class="section level2">
<h2 id="unpacking-a-multiverse-analysis">Unpacking a multiverse analysis<a class="anchor" aria-label="anchor" href="#unpacking-a-multiverse-analysis"></a>
</h2>
<p>There are two main ways to unpack and examine <code>multitool</code> results. The first is by using <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">tidyr::unnest()</a></code> (similar to unpacking the specification blueprint earlier).</p>
<div class="section level3">
<h3 id="unnest">Unnest<a class="anchor" aria-label="anchor" href="#unnest"></a>
</h3>
<div class="sourceCode" id="cb22"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">lm_fitted</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 7</span></span>
<span><span class="co">#&gt;    decision specifications   lm_code         lm_tidy  lm_gla…¹ lm_war…² lm_mes…³</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;glue&gt;          &lt;list&gt;   &lt;list&gt;   &lt;list&gt;   &lt;list&gt;  </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; # … with 38 more rows, and abbreviated variable names ¹​lm_glance, ²​lm_warnings,</span></span>
<span><span class="co">#&gt; #   ³​lm_messages</span></span></code></pre></div>
<p>Inside a <code>&lt;model function&gt;_fitted</code> column (here <code>lm_fitted</code>), <code>multitool</code> gives us 4 columns.</p>
<p>The first column is always the full code pipeline that produced the results: <code>lm_code</code>. The next are results passed to <a href="https://broom.tidymodels.org/" class="external-link"><code>broom</code></a> (if <code>tidy</code> and/or <code>glance</code> methods exist). For <code>lm</code>, we have <code>lm_tidy</code> and <code>lm_glance</code>. Notice the naming convention: <code>&lt;model function&gt;_tidy</code> and <code>&lt;model function&gt;_glance</code>.</p>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">lm_fitted</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">lm_tidy</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 192 × 11</span></span>
<span><span class="co">#&gt;    decision specificat…¹ lm_code term  estimate std.e…² stati…³ p.value lm_gla…⁴</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;       &lt;glue&gt;  &lt;chr&gt;    &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt; &lt;list&gt;  </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble&gt;     the_da… (Int… -0.0118   0.0581 -0.203  0.839   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  2 1        &lt;tibble&gt;     the_da… iv1   -0.0594   0.0625 -0.950  0.343   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  3 1        &lt;tibble&gt;     the_da… mod   -0.0127   0.0550 -0.232  0.817   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  4 1        &lt;tibble&gt;     the_da… iv1:…  0.148    0.0549  2.70   0.00738 &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  5 2        &lt;tibble&gt;     the_da… (Int…  0.0178   0.0577  0.308  0.758   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  6 2        &lt;tibble&gt;     the_da… iv1    0.0372   0.0620  0.600  0.549   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  7 2        &lt;tibble&gt;     the_da… mod    0.00435  0.0546  0.0797 0.937   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  8 2        &lt;tibble&gt;     the_da… iv1:… -0.0288   0.0545 -0.528  0.598   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  9 3        &lt;tibble&gt;     the_da… (Int…  0.0112   0.0580  0.194  0.846   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 10 3        &lt;tibble&gt;     the_da… iv2   -0.0196   0.0566 -0.346  0.730   &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; # … with 182 more rows, 2 more variables: lm_warnings &lt;list&gt;,</span></span>
<span><span class="co">#&gt; #   lm_messages &lt;list&gt;, and abbreviated variable names ¹​specifications,</span></span>
<span><span class="co">#&gt; #   ²​std.error, ³​statistic, ⁴​lm_glance</span></span></code></pre></div>
<p>The <code>lm_tidy</code> (or <code>&lt;model function&gt;_tidy</code>) column gives us the main results of <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> per decision. These include terms, estimates, standard errors, and p-values. <code>lm_glance</code> (or <code>&lt;model function&gt;_glance</code>) column gives us model fit statistics (among other things):</p>
<div class="sourceCode" id="cb24"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">lm_fitted</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">lm_glance</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 18</span></span>
<span><span class="co">#&gt;    decision specificat…¹ lm_code lm_tidy  r.squ…² adj.r.…³ sigma stati…⁴ p.value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;       &lt;glue&gt;  &lt;list&gt;     &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.0257   1.59e-2 0.988   2.61   0.0515</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00178 -8.30e-3 0.980   0.177  0.912 </span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00946 -5.50e-4 0.996   0.945  0.419 </span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.0132   3.23e-3 0.974   1.32   0.267 </span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00859 -1.43e-3 0.996   0.857  0.464 </span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00566 -4.38e-3 0.978   0.564  0.639 </span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.0256   1.58e-2 0.988   2.61   0.0514</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00180 -8.25e-3 0.978   0.179  0.910 </span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.00927 -7.04e-4 0.996   0.929  0.427 </span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble&gt;     the_da… &lt;tibble&gt; 0.0131   3.20e-3 0.973   1.32   0.267 </span></span>
<span><span class="co">#&gt; # … with 38 more rows, 9 more variables: df &lt;dbl&gt;, logLik &lt;dbl&gt;, AIC &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   BIC &lt;dbl&gt;, deviance &lt;dbl&gt;, df.residual &lt;int&gt;, nobs &lt;int&gt;,</span></span>
<span><span class="co">#&gt; #   lm_warnings &lt;list&gt;, lm_messages &lt;list&gt;, and abbreviated variable names</span></span>
<span><span class="co">#&gt; #   ¹​specifications, ²​r.squared, ³​adj.r.squared, ⁴​statistic</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="reveal">Reveal<a class="anchor" aria-label="anchor" href="#reveal"></a>
</h3>
<p>I wrote wrappers around the <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest()</a></code> workflow. The main function is <code><a href="reference/reveal.html">reveal()</a></code>. Pass a multiverse results <code>tibble</code> to <code><a href="reference/reveal.html">reveal()</a></code> and tell it which columns to grab by indicating the column name in the <code>.what</code> argument:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 48 × 7</span></span>
<span><span class="co">#&gt;    decision specifications   lm_code         lm_tidy  lm_gla…¹ lm_war…² lm_mes…³</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;glue&gt;          &lt;list&gt;   &lt;list&gt;   &lt;list&gt;   &lt;list&gt;  </span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  2 2        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  3 3        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  4 4        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  5 5        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  6 6        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  7 7        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  8 8        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt;  9 9        &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; 10 10       &lt;tibble [1 × 3]&gt; the_data |&gt; fi… &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt; &lt;tibble&gt;</span></span>
<span><span class="co">#&gt; # … with 38 more rows, and abbreviated variable names ¹​lm_glance, ²​lm_warnings,</span></span>
<span><span class="co">#&gt; #   ³​lm_messages</span></span></code></pre></div>
<p>If you want to get straight to a tidied result you can specify a sub-list with the <code>.which</code> argument:</p>
<div class="sourceCode" id="cb26"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span>, .which <span class="op">=</span> <span class="va">lm_tidy</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 192 × 7</span></span>
<span><span class="co">#&gt;    decision specifications   term        estimate std.error statistic p.value</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;list&gt;           &lt;chr&gt;          &lt;dbl&gt;     &lt;dbl&gt;     &lt;dbl&gt;   &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1        &lt;tibble [1 × 3]&gt; (Intercept) -0.0118     0.0581   -0.203  0.839  </span></span>
<span><span class="co">#&gt;  2 1        &lt;tibble [1 × 3]&gt; iv1         -0.0594     0.0625   -0.950  0.343  </span></span>
<span><span class="co">#&gt;  3 1        &lt;tibble [1 × 3]&gt; mod         -0.0127     0.0550   -0.232  0.817  </span></span>
<span><span class="co">#&gt;  4 1        &lt;tibble [1 × 3]&gt; iv1:mod      0.148      0.0549    2.70   0.00738</span></span>
<span><span class="co">#&gt;  5 2        &lt;tibble [1 × 3]&gt; (Intercept)  0.0178     0.0577    0.308  0.758  </span></span>
<span><span class="co">#&gt;  6 2        &lt;tibble [1 × 3]&gt; iv1          0.0372     0.0620    0.600  0.549  </span></span>
<span><span class="co">#&gt;  7 2        &lt;tibble [1 × 3]&gt; mod          0.00435    0.0546    0.0797 0.937  </span></span>
<span><span class="co">#&gt;  8 2        &lt;tibble [1 × 3]&gt; iv1:mod     -0.0288     0.0545   -0.528  0.598  </span></span>
<span><span class="co">#&gt;  9 3        &lt;tibble [1 × 3]&gt; (Intercept)  0.0112     0.0580    0.194  0.846  </span></span>
<span><span class="co">#&gt; 10 3        &lt;tibble [1 × 3]&gt; iv2         -0.0196     0.0566   -0.346  0.730  </span></span>
<span><span class="co">#&gt; # … with 182 more rows</span></span></code></pre></div>
<p>You can also choose to expand your specification blueprint with <code>.unpack_specs = TRUE</code> to see which decisions produced what result:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span>, .which <span class="op">=</span> <span class="va">lm_tidy</span>, .unpack_specs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 192 × 13</span></span>
<span><span class="co">#&gt;    decision ivs   dvs   include1    inclu…¹ inclu…² model model…³ term  estimate</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;   &lt;chr&gt;    &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 1        iv1   dv1   include1 =… includ… scale(… lm(d… linear… (Int… -0.0118 </span></span>
<span><span class="co">#&gt;  2 1        iv1   dv1   include1 =… includ… scale(… lm(d… linear… iv1   -0.0594 </span></span>
<span><span class="co">#&gt;  3 1        iv1   dv1   include1 =… includ… scale(… lm(d… linear… mod   -0.0127 </span></span>
<span><span class="co">#&gt;  4 1        iv1   dv1   include1 =… includ… scale(… lm(d… linear… iv1:…  0.148  </span></span>
<span><span class="co">#&gt;  5 2        iv1   dv2   include1 =… includ… scale(… lm(d… linear… (Int…  0.0178 </span></span>
<span><span class="co">#&gt;  6 2        iv1   dv2   include1 =… includ… scale(… lm(d… linear… iv1    0.0372 </span></span>
<span><span class="co">#&gt;  7 2        iv1   dv2   include1 =… includ… scale(… lm(d… linear… mod    0.00435</span></span>
<span><span class="co">#&gt;  8 2        iv1   dv2   include1 =… includ… scale(… lm(d… linear… iv1:… -0.0288 </span></span>
<span><span class="co">#&gt;  9 3        iv2   dv1   include1 =… includ… scale(… lm(d… linear… (Int…  0.0112 </span></span>
<span><span class="co">#&gt; 10 3        iv2   dv1   include1 =… includ… scale(… lm(d… linear… iv2   -0.0196 </span></span>
<span><span class="co">#&gt; # … with 182 more rows, 3 more variables: std.error &lt;dbl&gt;, statistic &lt;dbl&gt;,</span></span>
<span><span class="co">#&gt; #   p.value &lt;dbl&gt;, and abbreviated variable names ¹​include2, ²​include3,</span></span>
<span><span class="co">#&gt; #   ³​model_meta</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="condense">Condense<a class="anchor" aria-label="anchor" href="#condense"></a>
</h3>
<p>Unpacking specifications alongside specific results allows us to examine the effects of our pipeline decisions.</p>
<p>A powerful way to organize these results is to <code>condense</code> a specific results column, say our predictor regression coefficient, over the entire multiverse. <code><a href="reference/condense.html">condense()</a></code> takes a result column and summarizes it with the <code>.how</code> argument, which takes a list in the form of <code>list(&lt;a name you pick&gt; = &lt;summary function&gt;)</code>.</p>
<p><code>.how</code> will create a column named like so <code>&lt;column being condsensed&gt;_&lt;summary function name provided&gt;"</code>. For this case, we have <code>estimate_mean</code> and <code>estimate_median</code>.</p>
<div class="sourceCode" id="cb28"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span>, .which <span class="op">=</span> <span class="va">lm_tidy</span>, .unpack_specs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">term</span>, <span class="st">"iv"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/condense.html">condense</a></span><span class="op">(</span><span class="va">estimate</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span><span class="co">#&gt;   estimate_mean estimate_median</span></span>
<span><span class="co">#&gt;           &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1       -0.0107         -0.0226</span></span></code></pre></div>
<p>Here, we have filtered our multiverse results to look at our predictors <code>iv*</code> to see what the mean and median effect was (over all combinations of decisions) on our outcomes.</p>
<p>However, we had three versions of our predictor and two outcomes, so combining <code><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">dplyr::group_by()</a></code> with <code><a href="reference/condense.html">condense()</a></code> might be more informative:</p>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span>, .which <span class="op">=</span> <span class="va">lm_tidy</span>, .unpack_specs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_detect.html" class="external-link">str_detect</a></span><span class="op">(</span><span class="va">term</span>, <span class="st">"iv"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">ivs</span>, <span class="va">dvs</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/condense.html">condense</a></span><span class="op">(</span><span class="va">estimate</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 6 × 4</span></span>
<span><span class="co">#&gt; # Groups:   ivs [3]</span></span>
<span><span class="co">#&gt;   ivs   dvs   estimate_mean estimate_median</span></span>
<span><span class="co">#&gt;   &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt; 1 iv1   dv1         0.0414          0.0455 </span></span>
<span><span class="co">#&gt; 2 iv1   dv2         0.00767         0.00743</span></span>
<span><span class="co">#&gt; 3 iv2   dv1        -0.0327         -0.0427 </span></span>
<span><span class="co">#&gt; 4 iv2   dv2        -0.0357         -0.0380 </span></span>
<span><span class="co">#&gt; 5 iv3   dv1        -0.0136         -0.00601</span></span>
<span><span class="co">#&gt; 6 iv3   dv2        -0.0313         -0.0365</span></span></code></pre></div>
<p>If we were interested in all the terms of the model, we can leverage <code>group_by</code> further:</p>
<div class="sourceCode" id="cb30"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">multiverse_results</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/reveal.html">reveal</a></span><span class="op">(</span>.what <span class="op">=</span> <span class="va">lm_fitted</span>, .which <span class="op">=</span> <span class="va">lm_tidy</span>, .unpack_specs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/group_by.html" class="external-link">group_by</a></span><span class="op">(</span><span class="va">term</span>, <span class="va">ivs</span>, <span class="va">dvs</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="reference/condense.html">condense</a></span><span class="op">(</span><span class="va">estimate</span>, <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>mean <span class="op">=</span> <span class="va">mean</span>, median <span class="op">=</span> <span class="va">median</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; # A tibble: 24 × 5</span></span>
<span><span class="co">#&gt; # Groups:   term, ivs [12]</span></span>
<span><span class="co">#&gt;    term        ivs   dvs   estimate_mean estimate_median</span></span>
<span><span class="co">#&gt;    &lt;chr&gt;       &lt;chr&gt; &lt;chr&gt;         &lt;dbl&gt;           &lt;dbl&gt;</span></span>
<span><span class="co">#&gt;  1 (Intercept) iv1   dv1        -0.0246         -0.0256 </span></span>
<span><span class="co">#&gt;  2 (Intercept) iv1   dv2        -0.00580        -0.0107 </span></span>
<span><span class="co">#&gt;  3 (Intercept) iv2   dv1        -0.00931        -0.00977</span></span>
<span><span class="co">#&gt;  4 (Intercept) iv2   dv2        -0.00840        -0.0127 </span></span>
<span><span class="co">#&gt;  5 (Intercept) iv3   dv1        -0.00938        -0.00968</span></span>
<span><span class="co">#&gt;  6 (Intercept) iv3   dv2        -0.0121         -0.0164 </span></span>
<span><span class="co">#&gt;  7 iv1         iv1   dv1        -0.0716         -0.0741 </span></span>
<span><span class="co">#&gt;  8 iv1         iv1   dv2         0.0386          0.0383 </span></span>
<span><span class="co">#&gt;  9 iv1:mod     iv1   dv1         0.154           0.154  </span></span>
<span><span class="co">#&gt; 10 iv1:mod     iv1   dv2        -0.0233         -0.0226 </span></span>
<span><span class="co">#&gt; # … with 14 more rows</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="learning-more">Learning more<a class="anchor" aria-label="anchor" href="#learning-more"></a>
</h2>
<p>There are many other features of <code>multitool</code>, such as including pre-processing steps and/or post-processing to your blueprint. You can also conduct multiverse-style descriptive analyses or measurement analyses.</p>
</div>
<div class="section level2">
<h2 id="other-related-packages">Other related packages<a class="anchor" aria-label="anchor" href="#other-related-packages"></a>
</h2>
<ul>
<li><a href="https://masurp.github.io/specr/index.html" class="external-link"><code>specr</code></a></li>
<li><a href="https://mucollective.github.io/multiverse/" class="external-link"><code>multiverse</code></a></li>
<li><a href="https://mverseanalysis.github.io/mverse/index.html" class="external-link"><code>mverse</code></a></li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing multitool</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Ethan Young <br><small class="roles"> Author, maintainer </small> <a href="https://orcid.org/0000-0002-8232-0184" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
<li>Stefan Vermeent <br><small class="roles"> Author </small> <a href="https://orcid.org/0000-0002-9595-5373" target="orcid.widget" aria-label="ORCID" class="external-link"><span class="fab fa-orcid orcid" aria-hidden="true"></span></a> </li>
</ul>
</div>

<div class="dev-status">
<h2 data-toc-skip>Dev status</h2>
<ul class="list-unstyled">
<li><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="https://img.shields.io/badge/lifecycle-experimental-orange.svg" alt="Lifecycle: experimental"></a></li>
<li><a href="https://CRAN.R-project.org/package=multitool" class="external-link"><img src="https://www.r-pkg.org/badges/version/multitool" alt="CRAN status"></a></li>
<li><a href="https://github.com/ethan-young/multiverse_tools/actions/workflows/R-CMD-check.yaml" class="external-link"><img src="https://github.com/ethan-young/multiverse_tools/actions/workflows/R-CMD-check.yaml/badge.svg" alt="R-CMD-check"></a></li>
</ul>
</div>

  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Ethan Young, Stefan Vermeent.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
