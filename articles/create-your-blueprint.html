<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Defining an Analysis Pipeline Blueprint • multitool</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Lato-0.4.10/font.css" rel="stylesheet">
<link href="../deps/Fira_Code-0.4.10/font.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet">
<meta property="og:title" content="Defining an Analysis Pipeline Blueprint">
<script defer data-domain="ethan-young.github.io/multitool" src="https://plausible.io/js/script.js"></script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">multitool</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.4.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/create-your-blueprint.html">Defining an Analysis Pipeline Blueprint</a></li>
    <li><a class="dropdown-item" href="../articles/validate-your-blueprint.html">Check and Test your Blueprint</a></li>
    <li><a class="dropdown-item" href="../articles/run-your-pipeline.html">Run your Pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/multitool-nomenclature.html">multitool Nomenclature</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ethan-young/multitool/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">



<link href="create-your-blueprint_files/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
<script src="create-your-blueprint_files/htmlwidgets-1.6.4/htmlwidgets.js"></script><script src="create-your-blueprint_files/viz-1.8.2/viz.js"></script><link href="create-your-blueprint_files/DiagrammeR-styles-0.2/styles.css" rel="stylesheet">
<script src="create-your-blueprint_files/grViz-binding-1.0.11/grViz.js"></script><div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Defining an Analysis Pipeline Blueprint</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/ethan-young/multitool/blob/main/vignettes/create-your-blueprint.Rmd" class="external-link"><code>vignettes/create-your-blueprint.Rmd</code></a></small>
      <div class="d-none name"><code>create-your-blueprint.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h2>
<p>First things first. <code>multitool</code> leverages the
<code>tidyverse</code> package so lets load both:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ethan-young.github.io/multitool/">multitool</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="setting-up-a-data-analysis-pipeline">Setting up a data analysis pipeline<a class="anchor" aria-label="anchor" href="#setting-up-a-data-analysis-pipeline"></a>
</h2>
<p>Image we have some data with several predictor variables, moderators,
covariates, and dependent measures. We want to know if our predictors
(<code>ivs</code>) interact with our moderators (<code>mods</code>) to
predict the outcome (<code>dvs</code>).</p>
<p>But we have three versions of our predictor that (supposedly) measure
the same thing, albeit in slightly different ways.</p>
<p>In addition, because we collected messy data from the real world (not
really but let’s pretend), we have some idea of which observations to
include and which we might exclude (e.g., <code>include1</code>,
<code>include2</code>, <code>include3</code>).</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">&lt;-</span></span>
<span>  <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    id  <span class="op">=</span> <span class="fl">1</span><span class="op">:</span><span class="fl">500</span>,</span>
<span>    iv1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    iv2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    iv3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    mod <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    dv1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    dv2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span>,</span>
<span>    include1 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Binomial.html" class="external-link">rbinom</a></span><span class="op">(</span><span class="fl">500</span>, size <span class="op">=</span> <span class="fl">1</span>, prob <span class="op">=</span> <span class="fl">.1</span><span class="op">)</span>,</span>
<span>    include2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">3</span>, size <span class="op">=</span> <span class="fl">500</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>,</span>
<span>    include3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/Normal.html" class="external-link">rnorm</a></span><span class="op">(</span><span class="fl">500</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="create-a-blueprint">Create a blueprint<a class="anchor" aria-label="anchor" href="#create-a-blueprint"></a>
</h2>
<p>Say we don’t know much about this new and exciting area of
research.</p>
<p>We want to maximize our knowledge but we also want to be systematic.
One approach would be to specify a reasonable analysis pipeline.
Something that looks like the following:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Filter out exclusions</span></span>
<span><span class="va">filtered_data</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">the_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>,  <span class="co"># --</span></span>
<span>    <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>,  <span class="co"># Exclusion criteria</span></span>
<span>    <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span> <span class="co"># --</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="co"># Model the data</span></span>
<span><span class="va">my_model</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv1</span> <span class="op">~</span> <span class="va">iv1</span> <span class="op">*</span> <span class="va">mod</span>, data <span class="op">=</span> <span class="va">filtered_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Check the results</span></span>
<span><span class="va">my_results</span> <span class="op">&lt;-</span> <span class="fu">parameters</span><span class="fu">::</span><span class="fu"><a href="https://easystats.github.io/parameters/reference/model_parameters.html" class="external-link">parameters</a></span><span class="op">(</span><span class="va">my_model</span><span class="op">)</span></span></code></pre></div>
<p>But what if there are valid alternative alternatives to this
pipeline?</p>
<p>For example, using <code>iv2</code> instead of <code>iv1</code> or
only using two exclusion criteria instead of three? A sensible approach
would be to copy the code above, paste it, and edit with different
decisions.</p>
<p>This quickly become tedious. It adds many lines of code, many new
objects, and is difficult to keep track of in a systematic way.</p>
<p>Enter <code>multitool</code>.</p>
<p>With <code>multitool</code>, the above analysis pipeline can be
transformed into <strong>a specification blueprint</strong> for
exploring all combinations of sensible data decisions in a pipeline. It
was designed to leverage already written code (e.g., the
<code>filter</code> statement above) to create a all possible
combinations of data analysis pipelines.</p>
</div>
<div class="section level2">
<h2 id="filtering-specifications">Filtering specifications<a class="anchor" aria-label="anchor" href="#filtering-specifications"></a>
</h2>
<p>Our example above has three exclusion criteria. If we don’t know
which are important, for example, because they are based on arbitrary
‘rules of thumb’ (that may or may not have inherent wisdom) or we don’t
know if including/excluding these cases is valid, we can generate all
combinations:</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 6 × 3</span></span></span>
<span><span class="co">#&gt;   type    group    code                          </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> filters include1 include1 == 0                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> filters include1 include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> filters include2 include2 != 3                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> filters include2 include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> filters include3 include3 &gt; -2.5               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">6</span> filters include3 include3 %in% unique(include3)</span></span></code></pre></div>
<p>The output above is a simple <code>tibble</code> (i.e.,
<code>data.frame</code>) containing three columns.</p>
<p>Each row is a possible filter: the <code>type</code> column refers to
the type of blueprint specification (see below for types other than
filters), the <code>group</code> refers to the variable in the base data
frame (in our case <code>the_data</code>) for which the filter applies,
and the <code>code</code> column contains the code needed to execute the
filter.</p>
<p>For filtering decisions (e.g., exclusion criteria), a <em>‘do
nothing’</em> alternative is always generated.</p>
<p>For example, perhaps some observations belong to a subgroup,
<code>include1 == 1</code>. We may or may not have good reason to
exclude these cases (this depends on the specific situation).</p>
<p>But imagine that we don’t know if we should include them or not. When
<code>include1 == 1</code> is added to <code><a href="../reference/add_filters.html">add_filters()</a></code>, the
<em>‘do nothing’</em> alternative
<code>include1 %in% unique(include1)</code> is automatically generated
so you can compare including versus excluding cases based on a
criterion.</p>
</div>
<div class="section level2">
<h2 id="adding-alternative-analysis-variables">Adding alternative analysis variables<a class="anchor" aria-label="anchor" href="#adding-alternative-analysis-variables"></a>
</h2>
<p>Most multiverse-style analyses explore a range of exclusion criteria
and their alternatives. However, sometimes alternative versions of a
variable are also included.</p>
<p>In the social sciences, it is fairly common to have many measures of
roughly the same construct (i.e., measured variable). For example, a
happiness researcher might measure positive mood, life satisfaction,
and/or a single item measuring happiness (e.g., ‘how happy do your
feel?’).</p>
<p>If you want to explore the output of your pipeline with differing
versions of a variable, you can use <code><a href="../reference/add_variables.html">add_variables()</a></code>.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 3 × 3</span></span></span>
<span><span class="co">#&gt;   type      group code </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> variables ivs   iv1  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> variables ivs   iv2  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> variables ivs   iv3</span></span></code></pre></div>
<p>The output above generates the same <code>tibble</code> as
<code><a href="../reference/add_filters.html">add_filters()</a></code>. Each row is a particular decision to use a
particular variable in your pipeline.</p>
<p>In contrast to filter, however, you need to tell
<code><a href="../reference/add_variables.html">add_variables()</a></code> what to call each set of variables with the
<code>var_group</code> argument. This is how <code>multitool</code>
knows that each variable name in the <code>code</code> column is a
different alternative of a larger set.</p>
<p>Here, <code>var_group = "ivs"</code> indicates that
<code>iv1, iv2, iv3</code> are all different versions of
<code>ivs</code>. I used “ivs” as way of indicating to myself that these
are alternative versions of my main independent variable.</p>
<p>You can add as many variable sets as you want. For example, we might
also want to analyze our two versions of the outcome, <code>dv1</code>
and <code>dv2</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 5 × 3</span></span></span>
<span><span class="co">#&gt;   type      group code </span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> variables ivs   iv1  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">2</span> variables ivs   iv2  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">3</span> variables ivs   iv3  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">4</span> variables dvs   dv1  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">5</span> variables dvs   dv2</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="building-up-the-blueprint">Building up the blueprint<a class="anchor" aria-label="anchor" href="#building-up-the-blueprint"></a>
</h2>
<p>You can harness the real power of <code>multitool</code> by piping
specification statements.</p>
<p>For example, perhaps we want to explore our exclusion criteria
alternatives across different versions of our predictor and outcome
variables. We can simply pipe new blueprint specifications into each
other like so:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 11 × 3</span></span></span>
<span><span class="co">#&gt;    type      group    code                          </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> filters   include1 include1 == 0                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> filters   include1 include1 %in% unique(include1)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> filters   include2 include2 != 3                 </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> filters   include2 include2 %in% unique(include2)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> filters   include3 include3 &gt; -2.5               </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> filters   include3 include3 %in% unique(include3)</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> variables ivs      iv1                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> variables ivs      iv2                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> variables ivs      iv3                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> variables dvs      dv1                           </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> variables dvs      dv2</span></span></code></pre></div>
<p>Notice that we now have a specification blueprint with both exclusion
alternatives and variable alternatives.</p>
</div>
<div class="section level2">
<h2 id="adding-a-model">Adding a model<a class="anchor" aria-label="anchor" href="#adding-a-model"></a>
</h2>
<p>The whole point of building a specification blueprint is to
eventually feed it to a model and examine the results.</p>
<p>You can add a model to your blueprint by using
<code><a href="../reference/add_model.html">add_model()</a></code>. I designed <code><a href="../reference/add_model.html">add_model()</a></code> so the
user can simply paste a model function. For example, our call to
<code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code> can be simply pasted into <code><a href="../reference/add_model.html">add_model()</a></code>.
Make sure to give your model a label with the <code>model_desc</code>
argument.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">dv1</span> <span class="op">~</span> <span class="va">iv1</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;    type      group        code                           additional_args</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> filters   include1     include1 == 0                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> filters   include1     include1 %in% unique(include1) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> filters   include2     include2 != 3                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> filters   include2     include2 %in% unique(include2) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> filters   include3     include3 &gt; -2.5                <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> filters   include3     include3 %in% unique(include3) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> variables ivs          iv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> variables ivs          iv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> variables ivs          iv3                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> variables dvs          dv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> variables dvs          dv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> models    linear model lm(dv1 ~ iv1 * mod)            <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>Above, the model is completely unquoted. It also has no
<code>data</code> argument. This is intentional; <code>multitool</code>
is tracking the base dataset along the way (so you don’t have to). Note
that you can still quote the model formula, if that is more your
style.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="st">"lm(dv1 ~ iv1 * mod)"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;    type      group        code                           additional_args</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> filters   include1     include1 == 0                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> filters   include1     include1 %in% unique(include1) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> filters   include2     include2 != 3                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> filters   include2     include2 %in% unique(include2) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> filters   include3     include3 &gt; -2.5                <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> filters   include3     include3 %in% unique(include3) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> variables ivs          iv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> variables ivs          iv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> variables ivs          iv3                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> variables dvs          dv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> variables dvs          dv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> models    linear model lm(dv1 ~ iv1 * mod)            <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>To make sure your <code><a href="../reference/add_variables.html">add_variables()</a></code> works properly,
<code><a href="../reference/add_model.html">add_model()</a></code> was designed to interpret
<code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code> syntax. For example:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="op">{</span><span class="va">dvs</span><span class="op">}</span> <span class="op">~</span> <span class="op">{</span><span class="va">ivs</span><span class="op">}</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span> <span class="co"># see the {} here</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 12 × 4</span></span></span>
<span><span class="co">#&gt;    type      group        code                           additional_args</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                          <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> filters   include1     include1 == 0                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> filters   include1     include1 %in% unique(include1) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> filters   include2     include2 != 3                  <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> filters   include2     include2 %in% unique(include2) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> filters   include3     include3 &gt; -2.5                <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> filters   include3     include3 %in% unique(include3) <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> variables ivs          iv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> variables ivs          iv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> variables ivs          iv3                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> variables dvs          dv1                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">11</span> variables dvs          dv2                            <span style="color: #BB0000;">NA</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">12</span> models    linear model lm({dvs} ~ {ivs} * mod)        <span style="color: #BB0000;">NA</span></span></span></code></pre></div>
<p>This allows <code>multitool</code> to insert the correct version of
each variable specified in a <code><a href="../reference/add_variables.html">add_variables()</a></code> step. Make
sure to embrace the variable with the <code>var_group</code> argument
from <code><a href="../reference/add_variables.html">add_variables()</a></code>, for example
<code>add_model(lm({dvs} ~ {ivs} * mod))</code>.</p>
<p>Here, <code>dvs</code> and <code>ivs</code> tells
<code>multitool</code> to insert the current version of the
<code>ivs</code> and <code>dvs</code> into the model.</p>
</div>
<div class="section level2">
<h2 id="finalizing-the-specification-blueprint">Finalizing the specification blueprint<a class="anchor" aria-label="anchor" href="#finalizing-the-specification-blueprint"></a>
</h2>
<p>There are two steps in finalizing your blueprint. The first is to
visualize your pipeline with a graph. This is optional, but I think it
is helpful.</p>
<p>You can automate making a chart with
<code><a href="../reference/create_blueprint_graph.html">create_blueprint_graph()</a></code>. Feed your pipeline to
<code><a href="../reference/create_blueprint_graph.html">create_blueprint_graph()</a></code> to see a chart of your multiverse
pipeline plan:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">full_pipeline</span> <span class="op">&lt;-</span> </span>
<span>  <span class="va">the_data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu"><a href="../reference/add_filters.html">add_filters</a></span><span class="op">(</span><span class="va">include1</span> <span class="op">==</span> <span class="fl">0</span>, <span class="va">include2</span> <span class="op">!=</span> <span class="fl">3</span>, <span class="va">include3</span> <span class="op">&gt;</span> <span class="op">-</span><span class="fl">2.5</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"ivs"</span>, <span class="va">iv1</span>, <span class="va">iv2</span>, <span class="va">iv3</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_variables.html">add_variables</a></span><span class="op">(</span>var_group <span class="op">=</span> <span class="st">"dvs"</span>, <span class="va">dv1</span>, <span class="va">dv2</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="../reference/add_model.html">add_model</a></span><span class="op">(</span><span class="st">"linear model"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="op">{</span><span class="va">dvs</span><span class="op">}</span> <span class="op">~</span> <span class="op">{</span><span class="va">ivs</span><span class="op">}</span> <span class="op">*</span> <span class="va">mod</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/create_blueprint_graph.html">create_blueprint_graph</a></span><span class="op">(</span><span class="va">full_pipeline</span><span class="op">)</span></span>
<span><span class="co">#&gt; No subgroups in your pipeline</span></span>
<span><span class="co">#&gt; no descriptives</span></span>
<span><span class="co">#&gt; you have no preprocessing steps in your pipeline</span></span>
<span><span class="co">#&gt; you have no post processing steps in your pipeline</span></span></code></pre></div>
<div class="grViz html-widget html-fill-item" id="htmlwidget-ac96cb3ee4656e2e9ec3" style="width:552px;height:576px;"></div>
<script type="application/json" data-for="htmlwidget-ac96cb3ee4656e2e9ec3">{"x":{"diagram":"digraph {\n\ngraph [layout = \"dot\",\n       outputorder = \"edgesfirst\",\n       bgcolor = \"white\",\n       splines = \"line\",\n       overlap = \"false\"]\n\nnode [fontname = \"Helvetica\",\n      fontsize = \"10\",\n      shape = \"rect\",\n      fixedsize = \"false\",\n      width = \"0.5\",\n      style = \"rounded\",\n      fillcolor = \"aliceblue\",\n      color = \"gray\",\n      fontcolor = \"black\",\n      margin = \".25, 0\"]\n\nedge [fontname = \"Helvetica\",\n     fontsize = \"8\",\n     len = \"1.5\",\n     color = \"gray80\",\n     arrowsize = \"0.5\",\n     tailport = \"s\",\n     headport = \"n\",\n     concentrate = \"false\",\n     constraint = \"true\"]\n\n  \"1\" [label = <<BR/><B>Base Dataset<\/B><BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/>the_data<BR/> >] \n  \"2\" [label = <<BR/><B>Variables<\/B><BR/><BR/>2 sets<BR/>(2*3 = 6)<BR ALIGN=\"LEFT\"/> >] \n  \"3\" [label = <<BR/><B>dvs<\/B><BR ALIGN=\"LEFT\"/>&#x2022; dv1<BR ALIGN=\"LEFT\"/>&#x2022; dv2<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>ivs<\/B><BR ALIGN=\"LEFT\"/>&#x2022; iv1<BR ALIGN=\"LEFT\"/>&#x2022; iv2<BR ALIGN=\"LEFT\"/>&#x2022; iv3<BR ALIGN=\"LEFT\"/> >] \n  \"4\" [label = <<BR/><B>Filters<\/B><BR/><BR/>3 sets<BR/>(2*2*2 = 8)<BR ALIGN=\"LEFT\"/> >] \n  \"5\" [label = <<BR/><B>include1<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include1 equals 0<BR ALIGN=\"LEFT\"/>&#x2022; include1 is any value<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>include2<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include2 does not equal 3<BR ALIGN=\"LEFT\"/>&#x2022; include2 is any value<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>include3<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include3 bigger than -2.5<BR ALIGN=\"LEFT\"/>&#x2022; include3 is any value<BR ALIGN=\"LEFT\"/> >] \n  \"6\" [label = <<BR/><B>48 analysis datasets<\/B><BR/><BR/>filters (8) * variables (6)<BR ALIGN=\"LEFT\"/> >] \n  \"7\" [label = <<BR/><B>linear model<\/B><BR/><BR/>lm({dvs} ~ {ivs} * mod)<BR ALIGN=\"LEFT\"/> >] \n  \"8\" [label = <<BR/><B>48 fitted models<\/B><BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/>(2*2*2*2*3*1)<BR/> >] \n  \"1\" [label = <<BR/><B>Base Dataset<\/B><BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/>the_data<BR/> >] \nsubgraph{rank = same\n  \"2\" [label = <<BR/><B>Variables<\/B><BR/><BR/>2 sets<BR/>(2*3 = 6)<BR ALIGN=\"LEFT\"/> >] \n  \"3\" [label = <<BR/><B>dvs<\/B><BR ALIGN=\"LEFT\"/>&#x2022; dv1<BR ALIGN=\"LEFT\"/>&#x2022; dv2<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>ivs<\/B><BR ALIGN=\"LEFT\"/>&#x2022; iv1<BR ALIGN=\"LEFT\"/>&#x2022; iv2<BR ALIGN=\"LEFT\"/>&#x2022; iv3<BR ALIGN=\"LEFT\"/> >] \n  \"4\" [label = <<BR/><B>Filters<\/B><BR/><BR/>3 sets<BR/>(2*2*2 = 8)<BR ALIGN=\"LEFT\"/> >] \n  \"5\" [label = <<BR/><B>include1<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include1 equals 0<BR ALIGN=\"LEFT\"/>&#x2022; include1 is any value<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>include2<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include2 does not equal 3<BR ALIGN=\"LEFT\"/>&#x2022; include2 is any value<BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/><B>include3<\/B><BR ALIGN=\"LEFT\"/>&#x2022; include3 bigger than -2.5<BR ALIGN=\"LEFT\"/>&#x2022; include3 is any value<BR ALIGN=\"LEFT\"/> >] }\n\n  \"6\" [label = <<BR/><B>48 analysis datasets<\/B><BR/><BR/>filters (8) * variables (6)<BR ALIGN=\"LEFT\"/> >] \n  \"7\" [label = <<BR/><B>linear model<\/B><BR/><BR/>lm({dvs} ~ {ivs} * mod)<BR ALIGN=\"LEFT\"/> >] \n  \"8\" [label = <<BR/><B>48 fitted models<\/B><BR ALIGN=\"LEFT\"/><BR ALIGN=\"LEFT\"/>(2*2*2*2*3*1)<BR/> >] \n\"3\"->\"2\" [style = \"invis\", style = \"invis\", style = \"invis\", headport = \"n\", tailport = \"s\"] \n\"2\"->\"4\" [style = \"invis\", style = \"invis\", style = \"invis\", headport = \"n\", tailport = \"s\"] \n\"4\"->\"5\" [style = \"invis\", style = \"invis\", style = \"invis\", headport = \"n\", tailport = \"s\"] \n\"1\"->\"4\" [tailport = \"s\", tailport = \"s\", tailport = \"s\", headport = \"n\", tailport = \"s\"] \n\"1\"->\"2\" [tailport = \"s\", tailport = \"s\", tailport = \"s\", headport = \"n\", tailport = \"s\"] \n\"3\"->\"2\" [style = \"solid\", arrowhead = \"none\", arrowtail = \"none\", headport = \"w\", tailport = \"e\"] \n\"4\"->\"5\" [style = \"solid\", arrowhead = \"none\", arrowtail = \"none\", headport = \"w\", tailport = \"e\"] \n\"2\"->\"6\" [tailport = \"e\", tailport = \"e\", tailport = \"e\", headport = \"n\", tailport = \"s\"] \n\"4\"->\"6\" [tailport = \"s\", tailport = \"s\", tailport = \"s\", headport = \"n\", tailport = \"s\"] \n\"6\"->\"7\" [tailport = \"s\", tailport = \"s\", tailport = \"s\", headport = \"n\", tailport = \"s\"] \n\"7\"->\"8\" [tailport = \"s\", tailport = \"s\", tailport = \"s\", headport = \"n\", tailport = \"s\"] \n}","config":{"engine":"dot","options":null}},"evals":[],"jsHooks":[]}</script><p>The final step in making your blueprint is expanding all your
specifications into all possible combinations. You can do this by
calling <code><a href="../reference/expand_decisions.html">expand_decisions()</a></code> at the end of your blueprint
pipeline:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/expand_decisions.html">expand_decisions</a></span><span class="op">(</span><span class="va">full_pipeline</span><span class="op">)</span></span>
<span></span>
<span><span class="va">expanded_pipeline</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 4</span></span></span>
<span><span class="co">#&gt;    decision variables        filters          models          </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>          </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre></div>
<p>The result is an expanded <code>tibble</code> with 1 row per unique
decision and columns for each major blueprint category. In our example,
we have alternative variables (predictors and outcomes), filters (three
exclusion alternatives), and a model to run.</p>
<p>Note that we have 3 exclusions (each with two combinations), 3
versions of our predictor, and 2 versions of our outcome. This means our
blueprint should have <code>2*2*2*3*2</code> or 48 rows, which
corresponds with our expanded pipeline:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fl">2</span><span class="op">*</span><span class="fl">2</span><span class="op">*</span><span class="fl">2</span><span class="op">*</span><span class="fl">3</span><span class="op">*</span><span class="fl">2</span> <span class="op">==</span> <span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="va">expanded_pipeline</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>Our blueprint uses list columns to organize information. You can view
each list column by using
<code>tidyr::unnest(&lt;column name&gt;)</code>. For example, we can
look at the filters:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">filters</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 6</span></span></span>
<span><span class="co">#&gt;    decision variables        include1      include2      include3       models  </span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>          <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 &gt; -2… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 %in%… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 %in%… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 %in%… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> include1 == 0 include2 != 3 include3 %in%… <span style="color: #949494;">&lt;tibble&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre></div>
<p>Or we could look at the models:</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="va">models</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 6</span></span></span>
<span><span class="co">#&gt;    decision variables        filters          model        model_meta model_args</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10       <span style="color: #949494;">&lt;tibble [1 × 2]&gt;</span> <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre></div>
<p>Notice that, with the <code><a href="https://glue.tidyverse.org/reference/glue.html" class="external-link">glue::glue()</a></code> syntax, different
versions of our predictors and outcomes were inserted appropriately. You
can check their correspondence by using <code><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest()</a></code> on both
the models and variable list columns:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">expanded_pipeline</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://tidyr.tidyverse.org/reference/unnest.html" class="external-link">unnest</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">variables</span>, <span class="va">models</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 48 × 7</span></span></span>
<span><span class="co">#&gt;    decision ivs   dvs   filters          model             model_meta model_args</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;list&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1        iv1   dv1   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv1 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 2        iv1   dv2   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv1 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 3        iv2   dv1   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv2 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 4        iv2   dv2   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv2 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 5        iv3   dv1   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv3 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 6        iv3   dv2   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv3 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 7        iv1   dv1   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv1 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 8        iv1   dv2   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv1 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 9        iv2   dv1   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv1 ~ iv2 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 10       iv2   dv2   <span style="color: #949494;">&lt;tibble [1 × 3]&gt;</span> lm(dv2 ~ iv2 * m… linear mo… <span style="color: #949494;">""</span>        </span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 38 more rows</span></span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="going-further">Going further<a class="anchor" aria-label="anchor" href="#going-further"></a>
</h2>
<p>This example uses relatively simple pipeline steps. You can also add
more sophisticated steps to your pipeline, such as preprocessing data,
post-processing model results, or calculating descriptive statistics
alongside your model.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ethan Young, Stefan Vermeent.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
